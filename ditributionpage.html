<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>ANALYSIS of Distribution</title>

<script src="site_libs/header-attrs-2.28/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"><Home></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">HOME</a>
</li>
<li>
  <a href="aboutus.html">About Us</a>
</li>
<li>
  <a href="report.html">Report</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="demographics.html">Demographics</a>
</li>
<li>
  <a href="datasource.html">Data Source</a>
</li>
<li>
  <a href="location.html">Location</a>
</li>
<li>
  <a href="violations.html">Violations</a>
</li>
<li>
  <a href="cuisine.html">Cuisines</a>
</li>
<li>
  <a href="distributionpage.html">Distribution</a>
</li>
<li>
  <a href="https://katherinewang0903.shinyapps.io/shinyapp/">Shiny App</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-envelope fa-lg"></span>
     
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="mailto:qh2285@cumc.columbia.edu">Qianxuan Huang</a>
    </li>
    <li>
      <a href="mailto:dw3093@cumc.columbia.edu">Katherine Wang</a>
    </li>
    <li>
      <a href="mailto:rd3096@cumc.columbia.edu">Ruicong Du</a>
    </li>
    <li>
      <a href="mailto:yh3683@cumc.columbia.edu">Yining He</a>
    </li>
    <li>
      <a href="mailto:wz2722@cumc.columbia.edu">Wentao Zhou</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/katherinewang0903/final_nyc_restaurant.github.io">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">ANALYSIS of Distribution</h1>

</div>


<div id="grade-distribution-over-time" class="section level2">
<h2><strong>Grade Distribution Over Time</strong></h2>
<p>This section explores how restaurant grades have changed over time,
with a focus on neighborhoods and cuisine types. Using interactive
visualizations, we analyze the trends to uncover patterns in hygiene
ratings across Manhattan. We also highlight Italian restaurants as a
case study for evaluating trends in a specific cuisine.</p>
<pre class="r"><code>data &lt;- read_csv(&quot;Manhattan_Restaurant_Inspection_Results.csv&quot;) %&gt;%
  clean_names()

if (!all(c(&quot;grade&quot;, &quot;inspection_date&quot;) %in% colnames(data))) {
  stop(&quot;The required columns &#39;grade&#39; and &#39;inspection_date&#39; are not found in the dataset.&quot;)
}

time_data &lt;- data %&gt;%
  filter(!is.na(grade), !is.na(inspection_date)) %&gt;%
  mutate(year = as.numeric(format(as.Date(inspection_date, format = &quot;%m/%d/%Y&quot;), &quot;%Y&quot;)))

grade_trends_borough &lt;- time_data %&gt;%
  group_by(year, boro, grade) %&gt;%
  summarise(count = n(), .groups = &quot;drop&quot;)

viridis_colors &lt;- viridis(n = length(unique(grade_trends_borough$grade)))

plot_borough &lt;- plot_ly(
  grade_trends_borough,
  x = ~year,
  y = ~count,
  color = ~grade,
  colors = viridis_colors,
  type = &quot;scatter&quot;,
  mode = &quot;lines+markers&quot;,
  split = ~grade
) %&gt;%
  layout(
    title = list(text = &quot;Trends in Manhattan Restaurants Hygiene Grades Over Time&quot;),
    xaxis = list(title = &quot;Year&quot;),
    yaxis = list(title = &quot;Number of Restaurants&quot;),
    legend = list(title = list(text = &quot;Grade&quot;), x = 1.1),
    plot_bgcolor = &#39;rgba(0, 0, 0, 0)&#39;,
    paper_bgcolor = &#39;rgba(0, 0, 0, 0)&#39;
  )</code></pre>
<p><br></p>
<pre class="r"><code>grade_trends_cuisine &lt;- time_data %&gt;%
  filter(cuisine_description == &quot;Italian&quot;) %&gt;%
  group_by(year, cuisine_description, grade) %&gt;%
  summarise(count = n(), .groups = &quot;drop&quot;)

plot_cuisine &lt;- plot_ly(
  grade_trends_cuisine,
  x = ~year,
  y = ~count,
  color = ~grade,
  colors = viridis_colors,
  type = &quot;scatter&quot;,
  mode = &quot;lines+markers&quot;,
  split = ~grade
) %&gt;%
  layout(
    title = list(text = &quot;Grade Distribution Over Time for Italian Restaurants in Manhattan&quot;),
    xaxis = list(title = &quot;Year&quot;),
    yaxis = list(title = &quot;Number of Restaurants&quot;),
    legend = list(title = list(text = &quot;Grade&quot;), x = 1.1),
    plot_bgcolor = &#39;rgba(0, 0, 0, 0)&#39;,
    paper_bgcolor = &#39;rgba(0, 0, 0, 0)&#39;
  )

plot_borough</code></pre>
<div class="plotly html-widget html-fill-item" id="htmlwidget-7ccc101884f02f7cacaf" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-7ccc101884f02f7cacaf">{"x":{"visdat":{"e82b49d98ec8":["function () ","plotlyVisDat"]},"cur_data":"e82b49d98ec8","attrs":{"e82b49d98ec8":{"x":{},"y":{},"mode":"lines+markers","color":{},"split":{},"colors":["#440154FF","#414487FF","#2A788EFF","#22A884FF","#7AD151FF","#FDE725FF"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":{"text":"Trends in Manhattan Restaurants Hygiene Grades Over Time"},"xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Number of Restaurants"},"legend":{"title":{"text":"Grade"},"x":1.1000000000000001},"plot_bgcolor":"rgba(0, 0, 0, 0)","paper_bgcolor":"rgba(0, 0, 0, 0)","hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[2015,2016,2017,2018,2019,2020,2021,2022,2023,2024],"y":[7,74,141,218,313,167,1791,10272,10280,9319],"mode":"lines+markers","type":"scatter","name":"A","marker":{"color":"rgba(68,1,84,1)","line":{"color":"rgba(68,1,84,1)"}},"textfont":{"color":"rgba(68,1,84,1)"},"error_y":{"color":"rgba(68,1,84,1)"},"error_x":{"color":"rgba(68,1,84,1)"},"line":{"color":"rgba(68,1,84,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2017,2018,2019,2020,2021,2022,2023,2024],"y":[15,47,39,11,124,1496,1921,1269],"mode":"lines+markers","type":"scatter","name":"B","marker":{"color":"rgba(65,68,135,1)","line":{"color":"rgba(65,68,135,1)"}},"textfont":{"color":"rgba(65,68,135,1)"},"error_y":{"color":"rgba(65,68,135,1)"},"error_x":{"color":"rgba(65,68,135,1)"},"line":{"color":"rgba(65,68,135,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2016,2017,2018,2019,2020,2021,2022,2023,2024],"y":[1,9,8,1,15,81,922,1337,779],"mode":"lines+markers","type":"scatter","name":"C","marker":{"color":"rgba(42,120,142,1)","line":{"color":"rgba(42,120,142,1)"}},"textfont":{"color":"rgba(42,120,142,1)"},"error_y":{"color":"rgba(42,120,142,1)"},"error_x":{"color":"rgba(42,120,142,1)"},"line":{"color":"rgba(42,120,142,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2016,2019,2020,2021,2022,2023,2024],"y":[1,9,13,22,90,1184,2358],"mode":"lines+markers","type":"scatter","name":"N","marker":{"color":"rgba(34,168,132,1)","line":{"color":"rgba(34,168,132,1)"}},"textfont":{"color":"rgba(34,168,132,1)"},"error_y":{"color":"rgba(34,168,132,1)"},"error_x":{"color":"rgba(34,168,132,1)"},"line":{"color":"rgba(34,168,132,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2015,2019,2020,2021,2022,2023,2024],"y":[1,2,1,32,121,51,12],"mode":"lines+markers","type":"scatter","name":"P","marker":{"color":"rgba(122,209,81,1)","line":{"color":"rgba(122,209,81,1)"}},"textfont":{"color":"rgba(122,209,81,1)"},"error_y":{"color":"rgba(122,209,81,1)"},"error_x":{"color":"rgba(122,209,81,1)"},"line":{"color":"rgba(122,209,81,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2022,2023,2024],"y":[57,215,1194],"mode":"lines+markers","type":"scatter","name":"Z","marker":{"color":"rgba(253,231,37,1)","line":{"color":"rgba(253,231,37,1)"}},"textfont":{"color":"rgba(253,231,37,1)"},"error_y":{"color":"rgba(253,231,37,1)"},"error_x":{"color":"rgba(253,231,37,1)"},"line":{"color":"rgba(253,231,37,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>plot_cuisine</code></pre>
<div class="plotly html-widget html-fill-item" id="htmlwidget-f31c7cea736996e31209" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-f31c7cea736996e31209">{"x":{"visdat":{"e82be1d8b62":["function () ","plotlyVisDat"]},"cur_data":"e82be1d8b62","attrs":{"e82be1d8b62":{"x":{},"y":{},"mode":"lines+markers","color":{},"split":{},"colors":["#440154FF","#414487FF","#2A788EFF","#22A884FF","#7AD151FF","#FDE725FF"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":{"text":"Grade Distribution Over Time for Italian Restaurants in Manhattan"},"xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Number of Restaurants"},"legend":{"title":{"text":"Grade"},"x":1.1000000000000001},"plot_bgcolor":"rgba(0, 0, 0, 0)","paper_bgcolor":"rgba(0, 0, 0, 0)","hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[2017,2018,2019,2020,2021,2022,2023,2024],"y":[3,7,13,26,83,602,549,463],"mode":"lines+markers","type":"scatter","name":"A","marker":{"color":"rgba(68,1,84,1)","line":{"color":"rgba(68,1,84,1)"}},"textfont":{"color":"rgba(68,1,84,1)"},"error_y":{"color":"rgba(68,1,84,1)"},"error_x":{"color":"rgba(68,1,84,1)"},"line":{"color":"rgba(68,1,84,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2018,2019,2021,2022,2023,2024],"y":[3,5,9,63,110,89],"mode":"lines+markers","type":"scatter","name":"B","marker":{"color":"rgba(65,68,135,1)","line":{"color":"rgba(65,68,135,1)"}},"textfont":{"color":"rgba(65,68,135,1)"},"error_y":{"color":"rgba(65,68,135,1)"},"error_x":{"color":"rgba(65,68,135,1)"},"line":{"color":"rgba(65,68,135,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2017,2022,2023,2024],"y":[6,57,87,19],"mode":"lines+markers","type":"scatter","name":"C","marker":{"color":"rgba(42,120,142,1)","line":{"color":"rgba(42,120,142,1)"}},"textfont":{"color":"rgba(42,120,142,1)"},"error_y":{"color":"rgba(42,120,142,1)"},"error_x":{"color":"rgba(42,120,142,1)"},"line":{"color":"rgba(42,120,142,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2022,2023,2024],"y":[14,82,96],"mode":"lines+markers","type":"scatter","name":"N","marker":{"color":"rgba(34,168,132,1)","line":{"color":"rgba(34,168,132,1)"}},"textfont":{"color":"rgba(34,168,132,1)"},"error_y":{"color":"rgba(34,168,132,1)"},"error_x":{"color":"rgba(34,168,132,1)"},"line":{"color":"rgba(34,168,132,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2022],"y":[4],"mode":"lines+markers","type":"scatter","name":"P","marker":{"color":"rgba(122,209,81,1)","line":{"color":"rgba(122,209,81,1)"}},"textfont":{"color":"rgba(122,209,81,1)"},"error_y":{"color":"rgba(122,209,81,1)"},"error_x":{"color":"rgba(122,209,81,1)"},"line":{"color":"rgba(122,209,81,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2022,2023,2024],"y":[3,13,71],"mode":"lines+markers","type":"scatter","name":"Z","marker":{"color":"rgba(253,231,37,1)","line":{"color":"rgba(253,231,37,1)"}},"textfont":{"color":"rgba(253,231,37,1)"},"error_y":{"color":"rgba(253,231,37,1)"},"error_x":{"color":"rgba(253,231,37,1)"},"line":{"color":"rgba(253,231,37,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p><br></p>
<p>The above line chart shows trends in Manhattan restaurant hygiene
grades over time, with the x-axis representing years and the y-axis
showing the number of restaurants per grade. Grade “A” dominates,
showing a sharp increase around 2022, reflecting improved hygiene
practices or changes in inspection standards. Grades “B” and “C” also
rise slightly post-2020 but remain much lower. Other grades (“N,” “P,”
“Z”) are minimally represented. Overall, the data highlights a strong
focus on achieving high hygiene standards, with the majority of
restaurants attaining grade “A.”</p>
<p>The bottom line chart shows the grade distribution over time for
Italian restaurants in Manhattan, which we use as an example to
illustrate hygiene trends within a specific cuisine. The x-axis
represents years, while the y-axis displays the number of restaurants.
Grade “A” experienced a notable rise around 2022, reflecting either
improved hygiene practices or changes in inspection standards. Grades
“B” and “C” show minor increases but remain less prevalent, while other
grades (“N,” “P,” “Z”) are rarely observed. This trend underscores the
focus on maintaining high cleanliness standards among Italian
restaurants, with most achieving grade “A” in recent years.</p>
<p><br></p>
</div>
<div id="regression-model" class="section level2">
<h2><strong>Regression Model</strong></h2>
<div id="univariable-ordinal-regression" class="section level3">
<h3><em>Univariable Ordinal Regression</em></h3>
<p>To better understand the factors influencing hygiene grades, we build
a regression model, includes: - Converting grades (A, B, C) to numerical
values. - Categorizing Manhattan into regions (Downtown, Midtown,
Uptown, Other) based on zip codes. - Cleaning violation codes for more
reliable analysis.</p>
<p>In this analysis, we conducted a univariable ordinal regression to
explore the relationship between the restaurant grade (A, B, C) and
various predictors, including cuisine type, inspection type, violation
code, and location. The grades were converted to numeric values (1 for
A, 2 for B, 3 for C) to facilitate ordinal regression modeling. Each
predictor was analyzed independently to determine its effect on
restaurant grade, using the quasipoisson family to handle the ordinal
nature of the dependent variable.</p>
<pre class="r"><code>manhattan_data &lt;- read_csv(&quot;Manhattan_Restaurant_Inspection_Results.csv&quot;, na = c(&quot;NA&quot;, &quot;&quot;, &quot;.&quot;))
cleaned_data &lt;- manhattan_data %&gt;%
  janitor::clean_names() %&gt;%  
  filter(
    !is.na(dba),                         
    !is.na(cuisine_description),       
    !is.na(grade),                       
    !is.na(zipcode),
    grade %in% c(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;)
  ) %&gt;%
  mutate(
    grade_numeric = case_when(
      grade == &quot;A&quot; ~ 1,
      grade == &quot;B&quot; ~ 2,
      grade == &quot;C&quot; ~ 3
    ),  
    cuisine_description = factor(cuisine_description),  
    inspection_type = factor(inspection_type),  
    violation_code = str_trim(as.character(violation_code)),  
    location = case_when(
      zipcode &gt;= 10000 &amp; zipcode &lt;= 10025 ~ &quot;Downtown&quot;,
      zipcode &gt;= 10026 &amp; zipcode &lt;= 10040 ~ &quot;Midtown&quot;,
      zipcode &gt;= 10041 &amp; zipcode &lt;= 10282 ~ &quot;Uptown&quot;,
      TRUE ~ &quot;Other&quot;
    )
  ) %&gt;%
  mutate(location = factor(location)) 
cleaned_data &lt;- cleaned_data %&gt;%
  filter(grepl(&quot;^[A-Za-z0-9]+$&quot;, violation_code)) 
predictors &lt;- c(&quot;cuisine_description&quot;, &quot;inspection_type&quot;, &quot;violation_code&quot;, &quot;location&quot;)
univariable_results &lt;- lapply(predictors, function(predictor) {
  formula &lt;- as.formula(paste(&quot;grade_numeric ~&quot;, predictor))
  model &lt;- glm(formula, data = cleaned_data, family = quasipoisson) 
  tidy(model) %&gt;%
    mutate(predictor = predictor) %&gt;%
    select(predictor, term, estimate, std.error, p.value)
})
results_table &lt;- bind_rows(univariable_results) %&gt;%
  filter(term != &quot;(Intercept)&quot;)
kable(
  head(results_table, 10), 
  format = &quot;markdown&quot;,
  col.names = c(&quot;Predictor&quot;, &quot;Term&quot;, &quot;Estimate&quot;, &quot;Std. Error&quot;, &quot;p-value&quot;),
  caption = &quot;Top 10 Univariable Ordinal Regression Results&quot;
)</code></pre>
<table>
<caption>Top 10 Univariable Ordinal Regression Results</caption>
<colgroup>
<col width="21%" />
<col width="46%" />
<col width="10%" />
<col width="11%" />
<col width="10%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Predictor</th>
<th align="left">Term</th>
<th align="right">Estimate</th>
<th align="right">Std. Error</th>
<th align="right">p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">cuisine_description</td>
<td align="left">cuisine_descriptionAfrican</td>
<td align="right">0.7855205</td>
<td align="right">0.1393366</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">cuisine_description</td>
<td align="left">cuisine_descriptionAmerican</td>
<td align="right">0.1848587</td>
<td align="right">0.1348718</td>
<td align="right">0.1704997</td>
</tr>
<tr class="odd">
<td align="left">cuisine_description</td>
<td align="left">cuisine_descriptionArmenian</td>
<td align="right">0.4353181</td>
<td align="right">0.1820141</td>
<td align="right">0.0167765</td>
</tr>
<tr class="even">
<td align="left">cuisine_description</td>
<td align="left">cuisine_descriptionAsian/Asian Fusion</td>
<td align="right">0.3176720</td>
<td align="right">0.1357685</td>
<td align="right">0.0192987</td>
</tr>
<tr class="odd">
<td align="left">cuisine_description</td>
<td align="left">cuisine_descriptionAustralian</td>
<td align="right">0.3456047</td>
<td align="right">0.1407816</td>
<td align="right">0.0140967</td>
</tr>
<tr class="even">
<td align="left">cuisine_description</td>
<td align="left">cuisine_descriptionBagels/Pretzels</td>
<td align="right">0.2147958</td>
<td align="right">0.1366366</td>
<td align="right">0.1159531</td>
</tr>
<tr class="odd">
<td align="left">cuisine_description</td>
<td align="left">cuisine_descriptionBakery Products/Desserts</td>
<td align="right">0.2631724</td>
<td align="right">0.1353316</td>
<td align="right">0.0518243</td>
</tr>
<tr class="even">
<td align="left">cuisine_description</td>
<td align="left">cuisine_descriptionBangladeshi</td>
<td align="right">0.5108256</td>
<td align="right">0.1757424</td>
<td align="right">0.0036550</td>
</tr>
<tr class="odd">
<td align="left">cuisine_description</td>
<td align="left">cuisine_descriptionBarbecue</td>
<td align="right">0.2455706</td>
<td align="right">0.1421938</td>
<td align="right">0.0841730</td>
</tr>
<tr class="even">
<td align="left">cuisine_description</td>
<td align="left">cuisine_descriptionBasque</td>
<td align="right">0.0000000</td>
<td align="right">0.3812387</td>
<td align="right">1.0000000</td>
</tr>
</tbody>
</table>
<p>The results were summarized for each predictor, showing the estimate,
standard error, and p-value. Estimates represent the direction and
strength of the association between the predictor and grade, with
positive estimates indicating a tendency toward poorer grades (B, C) and
negative estimates indicating a tendency toward better grades (A).
P-values assess the statistical significance of these associations.</p>
<p>To improve the visualization and interpretation, we showcased only
the top 10 results. These results allow users to identify which cuisine
types or predictors have the strongest association with restaurant
hygiene grades. For example, cuisines such as African and Asian/Asian
Fusion showed statistically significant positive associations with grade
trends, indicating a noteworthy relationship worth further exploration.
This focused approach highlights key insights while maintaining a clean
and reader-friendly interface on the website.</p>
<p><br></p>
</div>
<div id="residual-diagnostics" class="section level3">
<h3><em>Residual Diagnostics</em></h3>
<pre class="r"><code>model_example &lt;- glm(grade_numeric ~ cuisine_description, data = cleaned_data, family = quasipoisson)
residuals_data &lt;- augment(model_example)

ggplot(residuals_data, aes(sample = .resid)) +
  stat_qq() +
  stat_qq_line(color = &quot;purple&quot;) +
  labs(
    title = &quot;Q-Q Plot of Residuals&quot;,
    x = &quot;Theoretical Quantiles&quot;,
    y = &quot;Sample Quantiles&quot;
  ) +
  theme_minimal()</code></pre>
<p><img src="ditributionpage_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>We conducted a residual diagnostic analysis on a generalized linear
model (GLM) using the <code>glm()</code> function with a quasipoisson
family to account for overdispersion in the data. The model predicts
numeric hygiene grades (<code>grade_numeric</code>, where A=1, B=2, C=3)
using <code>cuisine_description</code> as the predictor. Residuals from
the model were extracted with the <code>augment()</code> function for
further analysis. A Q-Q plot was then created to assess the normality of
the residuals.</p>
<p>In the plot, most data points align closely with the purple reference
line, indicating that the residuals generally follow a normal
distribution. However, deviations at the tails suggest potential issues,
such as outliers or non-normality for extreme values. These results
highlight that while the model performs well for the majority of the
data, further adjustments may be needed to address discrepancies at the
extremes and improve overall fit.</p>
<p>Go <a href="index.html">Home</a></p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
